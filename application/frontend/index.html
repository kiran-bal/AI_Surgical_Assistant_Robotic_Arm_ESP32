<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTRA - Surgical Assistant</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header with Logo -->
        <header class="header">
            <div class="logo-container">
                <img src="/static/img/astra.svg" alt="ASTRA" class="logo">
            </div>
            <h1 class="headline">How can I help you today?</h1>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Voice Recording Section -->
            <div class="voice-section">
                <!-- Microphone Button -->
                <div class="mic-button-container">
                    <button id="micButton" class="mic-button" aria-label="Start voice recording">
                        <div class="mic-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2a3 3 0 0 0-3 3v6a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z" fill="currentColor"/>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2a7 7 0 0 1 14 0z" fill="currentColor"/>
                                <path d="M12 18v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M8 22h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </button>
                    
                    <!-- Recording Animation -->
                    <div id="recordingAnimation" class="recording-animation hidden">
                        <div class="wave-container">
                            <div class="wave wave1"></div>
                            <div class="wave wave2"></div>
                            <div class="wave wave3"></div>
                            <div class="wave wave4"></div>
                        </div>
                    </div>
                </div>

                <!-- Live Transcription -->
                <div id="transcriptionContainer" class="transcription-container hidden">
                    <div id="transcriptionText" class="transcription-text">
                        Start speaking...
                    </div>
                </div>

                <!-- Action Buttons -->
                <div id="actionButtons" class="action-buttons hidden">
                    <button id="stopButton" class="btn btn-stop">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="6" y="6" width="12" height="12" fill="currentColor"/>
                        </svg>
                        Stop
                    </button>
                    <button id="discardButton" class="btn btn-discard">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Discard
                    </button>
                    <button id="sendButton" class="btn btn-send">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Send
                    </button>
                </div>
                
                <!-- Automatic Mode Indicator -->
                <div id="automaticModeIndicator" class="automatic-mode-indicator hidden">
                    <div class="auto-mode-text">
                        <span id="autoModeTimer" class="auto-mode-timer">3</span>s
                    </div>
                </div>
            </div>

            <!-- Status Section -->
            <div class="status-section">
                            <div class="status-grid">
                <div class="status-item">
                    <div class="status-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="status-info">
                        <span class="status-label">LLM Provider</span>
                        <span id="llmStatus" class="status-value">Loading...</span>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon">ðŸ“·</div>
                    <div class="status-info">
                        <span class="status-label">Camera</span>
                        <span id="cameraStatus" class="status-value">Loading...</span>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z" fill="currentColor"/>
                            <rect x="2" y="2" width="20" height="20" rx="2" stroke="currentColor" stroke-width="1" fill="none"/>
                            <circle cx="6" cy="6" r="1" fill="currentColor"/>
                            <circle cx="18" cy="6" r="1" fill="currentColor"/>
                            <circle cx="6" cy="18" r="1" fill="currentColor"/>
                            <circle cx="18" cy="18" r="1" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="status-info">
                        <span class="status-label">ESP32</span>
                        <span id="esp32Status" class="status-value">Loading...</span>
                    </div>
                </div>
            </div>
            </div>
        </main>

        <!-- Results Modal -->
        <div id="resultsModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ðŸ“Š Processing Results</h3>
                    <button id="closeModal" class="modal-close">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div id="modalResultsContent" class="modal-body">
                    <!-- Results will be populated here -->
                </div>
                <div class="modal-footer">
                    <button id="clearResults" class="btn btn-secondary">Clear Results</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p>Processing instruction...</p>
        </div>
        
        <!-- Results Button (Bottom Right Corner) -->
        <div id="resultsButton" class="results-button hidden">
            <button id="viewResultsButton" class="btn btn-small btn-primary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                View Results
            </button>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
